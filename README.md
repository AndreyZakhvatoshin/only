# Система бронирования служебных автомобилей

Это веб-приложение на Laravel позволяет сотрудникам компании бронировать доступные служебные автомобили на определённое время. Доступность автомобилей учитывает должность сотрудника (и соответствующие категории комфорта) и текущие бронирования.

## Функциональность

-   **Авторизация пользователей** через Sanctum API.
-   **Просмотр доступных автомобилей** на запланированное время.
-   **Фильтрация** списка автомобилей по:
    -   Модели автомобиля.
    -   Уровню комфорта.
-   **Учёт назначения**:
    -   Каждый автомобиль закреплён за конкретным водителем.
    -   Сотруднику доступны только автомобили, соответствующие категории комфорта его должности.
-   **Бронирование без конфликтов**: Система не позволяет забронировать автомобиль, если он уже занят в указанное время.

## Технологии

-   **Backend:** Laravel 12
-   **Database:** PostgreSQL
-   **API Authentication:** Laravel Sanctum
-   **Testing:** PHPUnit

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/AndreyZakhvatoshin/only.git
    cd only
    ```

2.  **Установите зависимости:**
    ```bash
    composer install
    ```

3.  **Настройте окружение:**
    ```bash
    cp .env.example .env
    ```

4.  **Сгенерируйте ключ приложения:**
    ```bash
    php artisan key:generate
    ```

5.  **Выполните миграции и наполните базу тестовыми данными:**
    ```bash
    php artisan migrate --seed
    ```

## API Endpoints

### Авторизация
-   `POST /login` - Аутентификация пользователя. Возвращает API токен.

### Автомобили
-   `GET /orders/cars` - Получить список доступных автомобилей.
    -   **Параметры запроса (все обязательны):**
        -   `start_time`: Начало поездки (формат: `Y-m-d H`, например, `2025-09-25 14`)
        -   `end_time`: Окончание поездки (формат: `Y-m-d H`, например, `2025-09-25 16`)
        -   `model_id[]`: Фильтр по ID моделей (массив, опционально).
        -   `comfort_level[]`: Фильтр по уровню комфорта (массив, опционально).

## Тестирование

Для запуска функциональных тестов используйте команду:

```bash
php artisan test